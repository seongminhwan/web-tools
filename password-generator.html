<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>随机密码生成器 - 网络安全工具集</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #4285F4; /* Google蓝 */
      --primary-dark: #3367d6; /* 深蓝色，用于悬停状态 */
      --secondary-color: #34A853; /* Google绿 */
      --accent-color: #EA4335; /* Google红 */
      --warning-color: #FBBC05; /* Google黄 */
      --card-yellow: #ffc300; /* 密码生成器黄 */
      --background-color: #f8f9fa;
      --card-bg: #ffffff;
      --text-color: #333333;
      --text-light: #666666;
      --border-color: #e0e0e0;
      --border-radius: 12px;
      --shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
    }

    body {
      background: var(--background-color);
      color: var(--text-color);
      line-height: 1.6;
      min-height: 100vh;
    }

    .container {
      max-width: 1000px;
      margin: 50px auto;
      padding: 20px;
      width: 100%;
    }

    header {
      text-align: center;
      margin-bottom: 40px;
    }

    h1 {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 15px;
      position: relative;
      display: inline-block;
    }

    h1::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 4px;
      background: var(--card-yellow);
      border-radius: 2px;
    }

    .subtitle {
      color: var(--text-light);
      margin-top: 20px;
      font-size: 1.1rem;
    }

    .alert {
      background-color: var(--warning-color);
      color: #333;
      padding: 15px 20px;
      border-radius: var(--border-radius);
      margin-bottom: 30px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .alert-icon {
      font-size: 20px;
    }

    .password-container {
      background: var(--card-bg);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      padding: 30px;
      margin-bottom: 30px;
    }

    .password-display {
      position: relative;
      margin-bottom: 20px;
    }

    .password-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 15px;
      color: var(--primary-color);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .password-output {
      width: 100%;
      padding: 15px;
      background-color: #fafafa;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      font-family: monospace;
      font-size: 18px;
      letter-spacing: 1px;
      white-space: nowrap;
      overflow-x: auto;
      user-select: all;
      min-height: 60px;
      display: flex;
      align-items: center;
    }

    .options-container {
      background: var(--card-bg);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      padding: 30px;
    }

    .options-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 20px;
      color: var(--primary-color);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .option-group {
      margin-bottom: 20px;
    }

    .option-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text-color);
    }

    .option-description {
      font-size: 0.9rem;
      color: var(--text-light);
      margin-bottom: 10px;
    }

    .range-inputs {
      display: flex;
      gap: 15px;
      align-items: center;
      margin-bottom: 5px;
    }

    .range-input {
      flex: 1;
      width: 100%;
      padding: 10px;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      font-size: 16px;
    }

    .range-input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.1);
    }

    .range-separator {
      font-size: 16px;
      color: var(--text-light);
    }

    .toggle-container {
      display: flex;
      flex-wrap: wrap;
      gap: 25px;
      margin-top: 15px;
    }

    .toggle-option {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 26px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 26px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: var(--secondary-color);
    }

    input:checked + .toggle-slider:before {
      transform: translateX(24px);
    }

    .toggle-label {
      font-size: 16px;
      cursor: pointer;
    }

    .button-group {
      display: flex;
      gap: 15px;
      margin-top: 25px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 12px 24px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      min-width: 150px;
    }

    .btn:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
    }

    .btn-secondary {
      background-color: var(--secondary-color);
    }

    .btn-secondary:hover {
      background-color: #2e9348;
    }

    .btn-generator {
      background-color: var(--card-yellow);
    }

    .btn-generator:hover {
      background-color: #e6b000;
    }

    .status-msg {
      margin-top: 15px;
      font-size: 16px;
      color: var(--secondary-color);
      min-height: 24px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .status-msg.show {
      opacity: 1;
    }

    .strength-meter {
      margin-top: 15px;
    }

    .strength-title {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .strength-label {
      font-weight: 600;
    }

    .strength-text {
      color: var(--text-light);
    }

    .strength-bar {
      height: 8px;
      background-color: #e0e0e0;
      border-radius: 4px;
      overflow: hidden;
    }

    .strength-bar-fill {
      height: 100%;
      width: 0;
      border-radius: 4px;
      transition: width 0.3s ease, background-color 0.3s ease;
    }

    .copy-btn {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: var(--primary-color);
      font-size: 18px;
      cursor: pointer;
      padding: 5px;
      transition: var(--transition);
    }

    .copy-btn:hover {
      color: var(--secondary-color);
    }

    .refresh-btn {
      position: absolute;
      right: 45px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: var(--primary-color);
      font-size: 18px;
      cursor: pointer;
      padding: 5px;
      transition: var(--transition);
    }

    .refresh-btn:hover {
      color: var(--secondary-color);
    }

    .home-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 600;
      margin-top: 20px;
      transition: var(--transition);
    }

    .home-link:hover {
      color: var(--accent-color);
    }

    footer {
      text-align: center;
      margin-top: 50px;
      padding: 20px;
      color: var(--text-light);
      font-size: 0.9rem;
    }

    /* 适配移动设备 */
    @media (max-width: 768px) {
      .container {
        padding: 15px;
        margin: 20px auto;
      }

      h1 {
        font-size: 2rem;
      }

      .toggle-container {
        flex-direction: column;
        gap: 15px;
      }

      .btn {
        width: 100%;
      }

      .range-inputs {
        flex-direction: column;
        gap: 10px;
      }

      .range-separator {
        display: none;
      }
    }

    /* 暗色模式 */
    @media (prefers-color-scheme: dark) {
      :root {
        --background-color: #121212;
        --card-bg: #1e1e1e;
        --text-color: #e0e0e0;
        --text-light: #a0a0a0;
        --border-color: #333333;
      }
      
      .password-output {
        background-color: #252525;
        color: #e0e0e0;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>随机密码生成器</h1>
      <p class="subtitle">生成安全、强壮的随机密码，保护您的在线账户安全</p>
      
      <a href="/" class="home-link">
        <i class="fas fa-home"></i> 返回首页
      </a>
    </header>

    <div class="alert">
      <i class="fas fa-info-circle alert-icon"></i>
      <div>
        所有密码生成操作均在本地完成，不会上传到服务器，请放心使用。
      </div>
    </div>

    <div class="password-container">
      <div class="password-title">
        <i class="fas fa-key"></i> 生成的密码
      </div>
      <div class="password-display">
        <div id="passwordOutput" class="password-output">点击生成按钮创建新密码</div>
        <button id="refreshBtn" class="refresh-btn" title="刷新密码">
          <i class="fas fa-sync-alt"></i>
        </button>
        <button id="copyBtn" class="copy-btn" title="复制密码">
          <i class="fas fa-copy"></i>
        </button>
      </div>
      
      <div class="strength-meter">
        <div class="strength-title">
          <span class="strength-label">密码强度</span>
          <span id="strengthText" class="strength-text">未生成</span>
        </div>
        <div class="strength-bar">
          <div id="strengthBarFill" class="strength-bar-fill"></div>
        </div>
      </div>
    </div>

    <div class="options-container">
      <div class="options-title">
        <i class="fas fa-sliders-h"></i> 密码选项
      </div>
      
      <div class="option-group">
        <label class="option-label">密码长度范围</label>
        <p class="option-description">设置密码的最小和最大长度，系统将在此范围内随机生成</p>
        <div class="range-inputs">
          <input type="number" id="minLength" class="range-input" value="16" min="8" max="32">
          <span class="range-separator">至</span>
          <input type="number" id="maxLength" class="range-input" value="24" min="8" max="64">
        </div>
      </div>
      
      <div class="option-group">
        <label class="option-label">密码字符类型</label>
        <p class="option-description">选择密码中包含的字符类型</p>
        <div class="toggle-container">
          <div class="toggle-option">
            <label class="toggle-switch">
              <input type="checkbox" id="includeUppercase" checked>
              <span class="toggle-slider"></span>
            </label>
            <span class="toggle-label">包含大写字母 (A-Z)</span>
          </div>
          <div class="toggle-option">
            <label class="toggle-switch">
              <input type="checkbox" id="includeLowercase" checked>
              <span class="toggle-slider"></span>
            </label>
            <span class="toggle-label">包含小写字母 (a-z)</span>
          </div>
          <div class="toggle-option">
            <label class="toggle-switch">
              <input type="checkbox" id="includeNumbers" checked>
              <span class="toggle-slider"></span>
            </label>
            <span class="toggle-label">包含数字 (0-9)</span>
          </div>
          <div class="toggle-option">
            <label class="toggle-switch">
              <input type="checkbox" id="includeSymbols" checked>
              <span class="toggle-slider"></span>
            </label>
            <span class="toggle-label">包含特殊字符 (!@#$%等)</span>
          </div>
        </div>
      </div>
      
      <div class="button-group">
        <button id="generateBtn" class="btn btn-generator">
          <i class="fas fa-random"></i> 生成密码
        </button>
      </div>
      
      <div id="statusMsg" class="status-msg"></div>
    </div>

    <footer>
      <p>&copy; 2025 网络安全工具集 | 安全 • 私密 • 便捷</p>
    </footer>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 获取DOM元素
      const passwordOutput = document.getElementById('passwordOutput');
      const minLengthInput = document.getElementById('minLength');
      const maxLengthInput = document.getElementById('maxLength');
      const includeUppercase = document.getElementById('includeUppercase');
      const includeLowercase = document.getElementById('includeLowercase');
      const includeNumbers = document.getElementById('includeNumbers');
      const includeSymbols = document.getElementById('includeSymbols');
      const generateBtn = document.getElementById('generateBtn');
      const refreshBtn = document.getElementById('refreshBtn');
      const copyBtn = document.getElementById('copyBtn');
      const statusMsg = document.getElementById('statusMsg');
      const strengthText = document.getElementById('strengthText');
      const strengthBarFill = document.getElementById('strengthBarFill');
      
      // 字符集定义
      const uppercaseChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      const lowercaseChars = 'abcdefghijklmnopqrstuvwxyz';
      const numberChars = '0123456789';
      const symbolChars = '!@#$%^&*()_+~`|}{[]:;?><,./-=';
      
      // 生成随机密码函数
      function generatePassword() {
        // 验证输入值
        let minLength = parseInt(minLengthInput.value);
        let maxLength = parseInt(maxLengthInput.value);
        
        // 长度验证和调整
        if (isNaN(minLength) || minLength < 8) minLength = 8;
        if (isNaN(maxLength) || maxLength > 64) maxLength = 64;
        if (minLength > maxLength) {
          // 如果最小值大于最大值，交换它们
          [minLength, maxLength] = [maxLength, minLength];
          minLengthInput.value = minLength;
          maxLengthInput.value = maxLength;
        }
        
        // 确保至少选择了一种字符类型
        if (!includeUppercase.checked && !includeLowercase.checked && 
            !includeNumbers.checked && !includeSymbols.checked) {
          // 默认启用小写字母
          includeLowercase.checked = true;
          showStatus('至少需要选择一种字符类型，已默认启用小写字母', 'warning');
        }
        
        // 构建可用字符集
        let charset = '';
        if (includeUppercase.checked) charset += uppercaseChars;
        if (includeLowercase.checked) charset += lowercaseChars;
        if (includeNumbers.checked) charset += numberChars;
        if (includeSymbols.checked) charset += symbolChars;
        
        // 确定随机密码长度（在最小值和最大值之间）
        const length = Math.floor(Math.random() * (maxLength - minLength + 1)) + minLength;
        
        // 生成密码
        let password = '';
        
        // 确保密码包含所有选定的字符类型
        const charTypeFunctions = [];
        if (includeUppercase.checked) {
          charTypeFunctions.push(() => getRandomChar(uppercaseChars));
        }
        if (includeLowercase.checked) {
          charTypeFunctions.push(() => getRandomChar(lowercaseChars));
        }
        if (includeNumbers.checked) {
          charTypeFunctions.push(() => getRandomChar(numberChars));
        }
        if (includeSymbols.checked) {
          charTypeFunctions.push(() => getRandomChar(symbolChars));
        }
        
        // 优先添加每种必要的字符类型
        for (const charTypeFunc of charTypeFunctions) {
          password += charTypeFunc();
        }
        
        // 填充剩余长度
        for (let i = charTypeFunctions.length; i < length; i++) {
          password += getRandomChar(charset);
        }
        
        // 打乱密码字符顺序
        password = shuffleString(password);
        
        // 显示生成的密码
        passwordOutput.textContent = password;
        
        // 更新密码强度指示器
        updateStrengthMeter(password);
        
        showStatus('已生成新密码！', 'success');
      }
      
      // 获取随机字符
      function getRandomChar(charset) {
        return charset.charAt(Math.floor(Math.random() * charset.length));
      }
      
      // 打乱字符串顺序
      function shuffleString(str) {
        const array = str.split('');
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array.join('');
      }
      
      // 更新密码强度指示器
      function updateStrengthMeter(password) {
        let score = 0;
        
        // 密码长度评分（8-64分）
        score += Math.min(64, password.length);
        
        // 字符多样性评分
        if (/[A-Z]/.test(password)) score += 10; // 包含大写字母
        if (/[a-z]/.test(password)) score += 10; // 包含小写字母
        if (/[0-9]/.test(password)) score += 10; // 包含数字
        if (/[^A-Za-z0-9]/.test(password)) score += 15; // 包含特殊字符
        
        // 额外的复杂度检查
        const uniqueChars = new Set(password).size;
        score += Math.min(20, uniqueChars); // 最多20分的唯一字符奖励
        
        // 标准化分数（0-100）
        const normalizedScore = Math.min(100, Math.max(0, score));
        
        // 设置强度条的宽度和颜色
        strengthBarFill.style.width = `${normalizedScore}%`;
        
        // 设置颜色和文本
        if (normalizedScore < 40) {
          strengthBarFill.style.backgroundColor = '#EA4335'; // 红色（弱）
          strengthText.textContent = '弱';
        } else if (normalizedScore < 70) {
          strengthBarFill.style.backgroundColor = '#FBBC05'; // 黄色（中）
          strengthText.textContent = '中';
        } else if (normalizedScore < 85) {
          strengthBarFill.style.backgroundColor = '#34A853'; // 绿色（强）
          strengthText.textContent = '强';
        } else {
          strengthBarFill.style.backgroundColor = '#4285F4'; // 蓝色（非常强）
          strengthText.textContent = '非常强';
        }
      }
      
      // 复制密码到剪贴板
      function copyToClipboard() {
        const password = passwordOutput.textContent;
        
        if (password === '点击生成按钮创建新密码') {
          showStatus('请先生成密码', 'warning');
          return;
        }
        
        try {
          navigator.clipboard.writeText(password).then(() => {
            showStatus('密码已复制到剪贴板！', 'success');
          });
        } catch (error) {
          console.error('复制失败:', error);
          showStatus('复制失败，请手动选择并复制', 'error');
        }
      }
      
      // 显示状态消息
      function showStatus(message, type) {
        statusMsg.textContent = message;
        statusMsg.classList.add('show');
        
        // 根据消息类型设置颜色
        switch (type) {
          case 'success':
            statusMsg.style.color = 'var(--secondary-color)';
            break;
          case 'error':
            statusMsg.style.color = 'var(--accent-color)';
            break;
          case 'warning':
            statusMsg.style.color = 'var(--warning-color)';
            break;
          default:
            statusMsg.style.color = 'var(--primary-color)';
        }
        
        // 3秒后隐藏消息
        setTimeout(() => {
          statusMsg.classList.remove('show');
        }, 3000);
      }
      
      // 为输入字段添加验证
      function validateNumberInput(input, min, max) {
        input.addEventListener('blur', function() {
          let value = parseInt(this.value);
          if (isNaN(value) || value < min) {
            this.value = min;
          } else if (value > max) {
            this.value = max;
          }
        });
      }
      
      // 设置验证
      validateNumberInput(minLengthInput, 8, 32);
      validateNumberInput(maxLengthInput, 8, 64);
      
      // 按钮事件监听
      generateBtn.addEventListener('click', generatePassword);
      refreshBtn.addEventListener('click', generatePassword);
      copyBtn.addEventListener('click', copyToClipboard);
      
      // 确保最小值不大于最大值
      minLengthInput.addEventListener('change', function() {
        const min = parseInt(minLengthInput.value);
        const max = parseInt(maxLengthInput.value);
        if (min > max) {
          maxLengthInput.value = min;
        }
      });
      
      maxLengthInput.addEventListener('change', function() {
        const min = parseInt(minLengthInput.value);
        const max = parseInt(maxLengthInput.value);
        if (max < min) {
          minLengthInput.value = max;
        }
      });
    });
  </script>
</body>
</html>